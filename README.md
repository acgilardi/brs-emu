# BRS-Emulator: BrightScript 2D API Emulator

## The Repository

This repository is a fork from [**BRS**](https://github.com/sjbarag/brs) project, a _command line interpreter_ for **BrightScript** language created by [Sean Barag](https://github.com/sjbarag/). My fork extends **BRS** by implementing the **Draw 2D API** components (`roScreen`, `roCompositor`, `roRegion`, etc.) and several other **BrightScript** components allowing a full channel execution over an **HTML5 Canvas**, including emulation of the Roku remote control. I will keep sending _pull requests_ to the original project, of fixes and implementations done here, so the _interpreter_ can improve and better support this emulator.

### So can I use this to watch TV without a Roku?

Nope! Both projects, **BRS** and **BRS-EMU**, currently has no intention of emulating the Roku OS user interface, integrating with the Roku store, or emulating media content playback.  Although the **BRS-EMU** project runs channels with user interface, it does only support 2D API components, mostly for game development, see [Current Limitations](https://github.com/lvcabral/brs-emu/blob/master/docs/limitations.md) page for full details on what is out of scope.

<p align="center">
<img alt="Emulator Web and Desktop" src="/../master/docs/images/screenshots.png?raw=true"/>
</p>

## Technology and Compatibility

This emulator is bundled as a **[Webpack](https://webpack.js.org/)** Javascript library that runs as a **[Web Worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers)**, and it uses features like [SharedArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer) and [OffScreenCanvas](https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas), that are _bleeding edge_ in the browser engines implementation, because of that, at this moment, it can only be executed in [Chromium](https://www.chromium.org/Home) based browsers, like [Chrome](https://www.google.com/chrome/), [Brave](https://brave.com/download/), [Opera](https://www.opera.com/), [Edge Chromium](https://www.microsoftedgeinsider.com/en-us/download/) or embedded on an [Electron](https://electronjs.org/) application. 

The **BrightScript Draw 2D API Emulator** is a full client-side library, nothing is sent or processed in the server side. Starting from v0.5.0 Alpha, in addition to the sample **web application**, the release also includes a multi-platform **desktop application** (Windows, Linux & Mac) that uses the same library generated by this project. The desktop app source code is also available at https://github.com/lvcabral/brs-emu-app. 

## Contributing

There are many ways in which you can participate in the project, read documents below to know the details:

* [How to contribute](https://github.com/lvcabral/brs-emu/blob/master/docs/contributing.md)
* [How to build from source](https://github.com/lvcabral/brs-emu/blob/master/docs/build-from-source.md)

## Usage

If just want to try the emulator, not downloading or installing anything you can access the demo website at: https://lvcabral.com/brs

As mentioned above, this repo provides a sample web appplication, to use it, download the `zip` file from the [latest release](https://github.com/lvcabral/brs-emu/releases) and unzip to a folder. Althought the emulator is a client application it cannot run as pure HTML page, as some browser functionalities have security restrictions, so you will need a simple web server to use the emulator. For that you can use `Apache` or `IIS` but there is a simpler option if your have [Python](https://www.python.org/) installed. If that's the case, just run the commands below on the `app` folder. As a shortcut you can also use two available batch files named `server.sh` and `server.bat` on the same folder.

* Linux
    ```
    $ python -m SimpleHTTPServer 8888
    or
    $ sh ./server.sh
    ```

* Windows
    ```
    c:\github\brs-emu\app> python -m http.server 8888
    or 
    c:\github\brs-emu\app> ./server.bat
    ```

With the webserver running you can now open your Chromium based browser at the page `http://localhost:8888/index.html`

### Games and Demos

You can try the emulator by running one of the demonstration channels included in the repository, these are pre-configured as _clickable icons_ on `index.html`. In addition to the icons, the emulator has a button where you can load your own code, either as a single **.brs** file or a channel **.zip package**. You can also load the `.zip` release files of some games, all the files linked below are tested on the emulator and are publicly available with source code.

*   [Prince of Persia for Roku](https://github.com/lvcabral/Prince-of-Persia-Roku) port by Marcelo Lv Cabral - Download [zip file](https://github.com/lvcabral/Prince-of-Persia-Roku/releases/download/v0.15.3700/Prince-of-Persia-Roku-015.zip)
*   [Lode Runner for Roku](https://github.com/lvcabral/Lode-Runner-Roku) remake by Marcelo Lv Cabral - Download [zip file](https://github.com/lvcabral/Lode-Runner-Roku/releases/download/v0.17.700/Lode-Runner-Roku-017.zip)
*   [Retaliate](https://github.com/lvcabral/retaliate-roku) game by Romans I XVI - Download [zip file](https://github.com/lvcabral/retaliate-roku/releases/download/v1.6.0-emu/retaliate-brs-emu.zip)



### Note for BrightScript Developers

You can see the debug messages from `print` statements in your code using the _browser console_, just right click anywhere in the page and select _Inspect (Ctrl+Shift+i)_. Exceptions from the emulator will be shown there too. If your code does show an error in some scenario not listed on the limitations above, feel free to [open an issue](https://github.com/lvcabral/brs-emu/issues) at the project's GitHub repository.


## License

Copyright Â© Marcelo Lv Cabral. All rights reserved.

Licensed under the [MIT](LICENSE) license.
